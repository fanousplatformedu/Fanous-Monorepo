# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type SchoolMini {
  id: String!
  name: String!
  slug: String!
  isActive: Boolean!
}

type User {
  role: Role!
  id: String!
  joinDate: DateTime!
  createdAt: DateTime!
  updatedAt: DateTime!
  isActive: Boolean!
  learningHours: Float!
  emailVerified: Boolean!
  phoneVerified: Boolean!
  coursesEnrolled: Float!
  certificatesEarned: Float!
  bio: String
  name: String
  email: String
  phone: String
  avatar: String
  website: String
  desiredRole: Role
  location: String
  education: String
  occupation: String
  roleApprovedAt: DateTime
  school: SchoolMini
}

enum Role {
  ADMIN
  PENDING
  STUDENT
  PARENT
  TEACHER
  COUNSELOR
  SUPER_ADMIN
  CONTENT_EDITOR
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type RoleApprovalRequest {
  id: String!
  createdAt: DateTime!
  updatedAt: DateTime!
  requestedRole: Role!
  user: User!
  status: ApprovalStatus!
  note: String
  reviewedAt: DateTime
  reviewedBy: User
  school: SchoolMini
}

enum ApprovalStatus {
  PENDING
  APPROVED
  REJECTED
}

type PagedRoleApprovalRequests {
  total: Float!
  items: [RoleApprovalRequest!]!
}

type AuthRegisterStatus {
  ok: Boolean!
  userId: String!
  desiredRole: Role!
}

type AuthPayload {
  role: Role!
  id: String!
  accessToken: String!
  refreshToken: String!
  name: String
  avatar: String
}

type Query {
  userHealthCheck: String!
  me: User!
  adminListRoleApprovals(input: AdminListRoleApprovalsInput!): PagedRoleApprovalRequests!
  adminGetRoleApproval(requestId: String!): RoleApprovalRequest!
  adminListSchools: [SchoolMini!]!
}

input AdminListRoleApprovalsInput {
  status: ApprovalStatus
  requestedRole: Role
  q: String
  page: Float = 1
  limit: Float = 20
}

type Mutation {
  authRegisterRequest(input: AuthRegisterRequestInput!): AuthRegisterStatus!
  authRequestOtp(input: AuthRequestOtpInput!): Boolean!
  authVerifyOtp(input: AuthVerifyOtpInput!): AuthPayload!
  authRefreshToken(input: AuthRefreshTokenInput!): AuthPayload!
  authLogout(refreshToken: String!): Boolean!
  updateMe(input: UserUpdateMeInput!): User!
  adminApproveRole(input: AdminReviewRoleRequestInput!): RoleApprovalRequest!
  adminRejectRole(input: AdminReviewRoleRequestInput!): RoleApprovalRequest!
  adminAssignSchoolAdmin(input: AdminAssignSchoolAdminInput!): User!
}

input AuthRegisterRequestInput {
  desiredRole: Role!
  identifier: String!
  channel: OtpChannel!
  name: String
  tenantId: String
}

enum OtpChannel {
  EMAIL
  PHONE
}

input AuthRequestOtpInput {
  identifier: String!
  channel: OtpChannel!
  tenantId: String
}

input AuthVerifyOtpInput {
  code: String!
  identifier: String!
  channel: OtpChannel!
  tenantId: String
}

input AuthRefreshTokenInput {
  refreshToken: String!
}

input UserUpdateMeInput {
  name: String
  bio: String
  location: String
  website: String
  education: String
  occupation: String
  avatar: String
}

input AdminReviewRoleRequestInput {
  requestId: String!
  note: String
}

input AdminAssignSchoolAdminInput {
  userId: String!
  schoolId: String!
}